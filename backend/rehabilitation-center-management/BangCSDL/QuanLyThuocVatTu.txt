-- CƠ SỞ DỮ LIỆU QUẢN LÝ THUỐC, VẬT TƯ Y TẾ

-- 1. Danh mục tài sản
CREATE TABLE DanhMucTaiSan (
    MaDanhMuc VARCHAR2(50) PRIMARY KEY,
    TenDanhMuc VARCHAR2(255),
    TrangThai VARCHAR2(50),
    DonViTinh VARCHAR2(50)
);

-- 2. Thuộc tính sản phẩm
CREATE TABLE ThuocTinhSanPham (
    MaThuocTinh VARCHAR2(50) PRIMARY KEY,
    TenThuocTinh VARCHAR2(255),
    MoTaThuocTinh VARCHAR2(255),
    MaGiaTriThuocTinh VARCHAR2(50),
    TenGiaTriThuocTinh VARCHAR2(255),
    MoTaGiaTriThuocTinh VARCHAR2(255),
    TrangThai VARCHAR2(50)
);

-- 3. Nhà cung cấp
CREATE TABLE NhaCungCap (
    MaNhaCungCap VARCHAR2(50) PRIMARY KEY,
    TenNhaCungCap VARCHAR2(255),
    TrangThai VARCHAR2(50),
    MoTa VARCHAR2(255)
);

-- 4. Đơn vị tính
CREATE TABLE DonViTinh (
    MaDonViTinh VARCHAR2(50) PRIMARY KEY,
    TenDonVi VARCHAR2(100),
    MoTa VARCHAR2(255),
    TrangThai VARCHAR2(50)
);

-- 5. Thuốc/Vật tư y tế
CREATE TABLE ThuocVatTu (
    MaSanPham VARCHAR2(50) PRIMARY KEY,
    SKU VARCHAR2(100),
    LoaiSanPham VARCHAR2(100),
    DonViTinh VARCHAR2(50),
    NhaCungCap VARCHAR2(50),
    MoTa VARCHAR2(255),
    GiaNhap VARCHAR2(50),
    FOREIGN KEY (DonViTinh) REFERENCES DonViTinh(MaDonViTinh),
    FOREIGN KEY (NhaCungCap) REFERENCES NhaCungCap(MaNhaCungCap)
);

-- 6. Quản lý kho
CREATE TABLE QuanLyKho (
    MaSanPham VARCHAR2(50) PRIMARY KEY,
    SoLuongTonKho VARCHAR2(50),
    SoLuongSuDungDuoc VARCHAR2(50),
    SoLuongDangXuLy VARCHAR2(50),
    FOREIGN KEY (MaSanPham) REFERENCES ThuocVatTu(MaSanPham)
);

-- 7. Kiểm kê kho
CREATE TABLE KiemKeKho (
    ID NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY PRIMARY KEY,
    MaSanPham VARCHAR2(50),
    TenSanPham VARCHAR2(255),
    ThoiGianKiemKe DATE,
    SLTonThucTe VARCHAR2(50),
    SLChenhLech VARCHAR2(50),
    LyDo VARCHAR2(255),
    GiaTriChenhLech VARCHAR2(50),
    NguoiThucHien VARCHAR2(255),
    FOREIGN KEY (MaSanPham) REFERENCES ThuocVatTu(MaSanPham)
);
